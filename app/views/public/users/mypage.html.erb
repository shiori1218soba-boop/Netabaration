<div class="container mt-4">

  <h2 class="mb-4">マイページ</h2>

  <!-- ユーザー情報カード -->
  <div class="card mb-4 shadow-sm">
    <div class="card-body">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 mr-2">
          <%= image_tag @user.profile_image.attached? ? @user.profile_image : "default_user.png",
                        size: "40x40",
                        class: "rounded-circle" %>
        </div>
        <div class="ms-2">
          <h4 class="card-title mb-0"><%= @user.name %> さん</h4>
        </div>
      </div>
      <p class="card-text text-muted"><%= @user.email %></p>
      <p class="card-text"><%= @user.introduction %></p>

      <%= link_to "ユーザー情報を編集", edit_user_information_path,
          class: "btn btn-primary" %>
    </div>
  </div>

  <h3 class="mb-3">あなたの投稿一覧</h3>

  <!-- 投稿一覧 -->
  <% @posts.each do |post| %>
    <div class="card mb-3 shadow-sm">
      <div class="card-body">
        <h5><%= link_to post.title, group_post_path(post.group, post) %></h5>
        <p><%= truncate(post.body, length: 80) %></p>
        <small class="text-muted"><%= post.created_at.strftime("%Y-%m-%d %H:%M") %></small>
        <p>
          <%= link_to "#{post.post_comments.active.count} 件のコメント", group_post_path(post.group, post) %>
        </p>
      </div>
    </div>
  <% end %>

  <% if @posts.empty? %>
    <p class="text-muted">投稿はまだありません。</p>
  <% end %>
</div>
