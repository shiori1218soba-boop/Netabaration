<div class="container mt-5">
  <h3 class="mb-4">ユーザー詳細</h3>

  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body">

      <p><strong>ID：</strong> <%= @user.id %></p>
      <div class="d-flex align-items-center text-muted small mb-1">
        <span class="me-1"><strong>名前：</strong></span>

        <% if @user.profile_image.attached? %>
          <%= image_tag post.user.profile_image,
                size: "24x24",
                class: "rounded-circle me-2" %>
        <% else %>
          <%= image_tag "default_user.png",
                size: "24x24",
                class: "rounded-circle me-2" %>
        <% end %>

        <% if @user == current_user %>
          <%= link_to @user.name, mypage_path, class: "text-muted" %>
        <% else %>
          <%= link_to @user.name, user_path(@user), class: "text-muted" %>
        <% end %>
      </div>
      <p><strong>Email：</strong> <%= @user.email %></p>
      <p><strong>ユーザー紹介：</strong><br>
        <%= simple_format(@user.introduction) %>
      </p>
      <p><strong>登録日：</strong>
        <%= l @user.created_at, format: :long %>
      </p>

      <p><strong>状態：</strong>
        <% if @user.deleted_at.present? %>
          <span class="badge bg-secondary">退会</span>
        <% else %>
          <span class="badge bg-success">有効</span>
        <% end %>
      </p>
    </div>
  </div>

  <!-- 管理操作 -->
  <div class="d-flex gap-2">
    <% if @user.deleted_at.present? %>
      <%= button_to "利用再開",
          admin_user_path(@user),
          method: :patch,
          params: { user: { deleted_at: false } },
          class: "btn btn-success mr-3" %>
    <% else %>
      <%= button_to "退会させる",
          admin_user_path(@user),
          method: :patch,
          params: { user: { deleted_at: true } },
          data: { confirm: "本当に退会させますか？" },
          class: "btn btn-danger mr-3" %>
    <% end %>

    <%= link_to "一覧へ戻る", admin_root_path, class: "btn btn-outline-secondary" %>
  </div>
</div>